<div class="admin-content-page">
  <app-navbar 
    userRole="ADMIN"
    userName="Admin User"
    [notificationCount]="5"
  ></app-navbar>
  
  <div class="container">
    <!-- Page Header -->
    <div class="page-header mb-4">
      <div>
        <h1 class="page-title">
          <i class="pi pi-file-edit mr-2"></i>
          Gestión de Contenido
        </h1>
        <p class="page-subtitle">Administra los recursos, artículos y guías de la plataforma</p>
      </div>
      <p-button 
        label="Nuevo Contenido" 
        icon="pi pi-plus" 
        styleClass="p-button-primary"
      ></p-button>
    </div>

    <!-- Stats Row -->
    <div class="stats-grid mb-4">
      <p-card styleClass="stat-card">
        <div class="stat-content">
          <div class="stat-icon articles">
            <i class="pi pi-file text-3xl"></i>
          </div>
          <div class="stat-info">
            <div class="stat-value">124</div>
            <div class="stat-label">Artículos Publicados</div>
          </div>
        </div>
      </p-card>

      <p-card styleClass="stat-card">
        <div class="stat-content">
          <div class="stat-icon pending">
            <i class="pi pi-clock text-3xl"></i>
          </div>
          <div class="stat-info">
            <div class="stat-value">8</div>
            <div class="stat-label">Pendientes de Revisión</div>
          </div>
        </div>
      </p-card>

      <p-card styleClass="stat-card">
        <div class="stat-content">
          <div class="stat-icon views">
            <i class="pi pi-eye text-3xl"></i>
          </div>
          <div class="stat-info">
            <div class="stat-value">45.2k</div>
            <div class="stat-label">Vistas Totales</div>
          </div>
        </div>
      </p-card>
    </div>

    <!-- Content Table Card -->
    <p-card styleClass="content-table-card">
      <!-- Filters Header -->
      <div class="table-header mb-4">
        <div class="search-filters">
          <span class="p-input-icon-left flex-1" style="max-width: 400px;">
            <i class="pi pi-search"></i>
            <input 
              type="text" 
              pInputText 
              placeholder="Buscar contenido..." 
              (input)="onGlobalFilter($event)"
              class="w-full"
            />
          </span>
          
          <p-dropdown 
            [options]="typeOptions" 
            [(ngModel)]="selectedType"
            optionLabel="label" 
            optionValue="value"
            placeholder="Todos los tipos"
            styleClass="filter-dropdown"
          ></p-dropdown>

          <p-dropdown 
            [options]="statusOptions" 
            [(ngModel)]="selectedStatus"
            optionLabel="label" 
            optionValue="value"
            placeholder="Todos los estados"
            styleClass="filter-dropdown"
          ></p-dropdown>
        </div>
      </div>

      <!-- Table -->
      <p-table 
        [value]="contentItems" 
        [paginator]="true" 
        [rows]="10"
        [rowsPerPageOptions]="[5, 10, 20]"
        [globalFilterFields]="['title', 'author.name', 'type', 'status']"
        styleClass="p-datatable-gridlines"
        responsiveLayout="scroll"
      >
        <ng-template pTemplate="header">
          <tr>
            <th pSortableColumn="title">
              TÍTULO
              <p-sortIcon field="title"></p-sortIcon>
            </th>
            <th pSortableColumn="type">
              TIPO
              <p-sortIcon field="type"></p-sortIcon>
            </th>
            <th pSortableColumn="author.name">
              AUTOR
              <p-sortIcon field="author.name"></p-sortIcon>
            </th>
            <th pSortableColumn="date">
              FECHA
              <p-sortIcon field="date"></p-sortIcon>
            </th>
            <th pSortableColumn="status">
              ESTADO
              <p-sortIcon field="status"></p-sortIcon>
            </th>
            <th pSortableColumn="views" class="text-center">
              VISTAS
              <p-sortIcon field="views"></p-sortIcon>
            </th>
            <th class="text-center">ACCIONES</th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-item>
          <tr>
            <td>
              <div class="content-title-cell">
                <div class="content-title">{{ item.title }}</div>
                <div class="content-slug">{{ item.slug }}</div>
              </div>
            </td>
            <td>
              <p-tag 
                [value]="getTypeLabel(item.type)" 
                [severity]="getTypeSeverity(item.type)"
                [icon]="getTypeIcon(item.type)"
                styleClass="type-tag"
              ></p-tag>
            </td>
            <td>
              <div class="author-info">
                <p-avatar 
                  [label]="item.author.avatar" 
                  size="normal"
                  shape="circle"
                  styleClass="author-avatar"
                ></p-avatar>
                <span>{{ item.author.name }}</span>
              </div>
            </td>
            <td>
              <span class="date-text">
                <i class="pi pi-calendar mr-1"></i>
                {{ item.date }}
              </span>
            </td>
            <td>
              <p-tag 
                [value]="getStatusLabel(item.status)" 
                [severity]="getStatusSeverity(item.status)"
                styleClass="status-tag"
              ></p-tag>
            </td>
            <td class="text-center">
              <span class="views-count">{{ item.views | number }}</span>
            </td>
            <td>
              <div class="action-buttons">
                <p-button 
                  icon="pi pi-eye" 
                  styleClass="p-button-rounded p-button-text p-button-info"
                  pTooltip="Ver"
                  tooltipPosition="top"
                ></p-button>
                <p-button 
                  icon="pi pi-pencil" 
                  styleClass="p-button-rounded p-button-text p-button-secondary"
                  pTooltip="Editar"
                  tooltipPosition="top"
                ></p-button>
                <p-button 
                  icon="pi pi-trash" 
                  styleClass="p-button-rounded p-button-text p-button-danger"
                  pTooltip="Eliminar"
                  tooltipPosition="top"
                ></p-button>
              </div>
            </td>
          </tr>
        </ng-template>

        <ng-template pTemplate="emptymessage">
          <tr>
            <td colspan="7" class="text-center py-6">
              <div class="empty-state">
                <i class="pi pi-inbox text-4xl mb-3"></i>
                <p>No se encontraron resultados</p>
              </div>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </p-card>
  </div>
</div>

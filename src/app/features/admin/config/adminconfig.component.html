<div class="admin-config-page">
  <app-navbar 
    [userRole]="'ADMIN'" 
    [userName]="'Admin User'"
    [notificationCount]="5"
  ></app-navbar>
  
  <div class="container">
    <div class="page-header">
      <div>
        <h1>‚öôÔ∏è Configuraci√≥n</h1>
        <p class="subtitle">Ajustes generales de la plataforma y sistema</p>
      </div>
      <div class="header-actions">
        <app-button 
          *ngIf="hasChanges" 
          variant="secondary" 
          icon="‚Ü©Ô∏è" 
          (click)="resetChanges()">
          Descartar
        </app-button>
        <app-button 
          variant="primary" 
          icon="üíæ" 
          [disabled]="!hasChanges"
          (click)="saveChanges()">
          Guardar Cambios
        </app-button>
      </div>
    </div>

    <div class="config-layout">
      <!-- Sidebar Navigation -->
      <app-card class="config-sidebar">
        <nav class="config-nav">
          <button 
            *ngFor="let section of sections" 
            class="nav-item" 
            [class.active]="activeSection === section.id"
            (click)="setActiveSection(section.id)">
            <span class="icon">{{ section.icon }}</span> {{ section.label }}
          </button>
        </nav>
      </app-card>

      <!-- Main Content -->
      <div class="config-content">
        <!-- General Settings -->
        <app-card class="config-section" *ngIf="activeSection === 'general'">
          <h3>Informaci√≥n de la Plataforma</h3>
          <div class="form-grid">
            <div class="form-group">
              <label>Nombre de la Plataforma</label>
              <input 
                type="text" 
                [(ngModel)]="config.platformName" 
                (ngModelChange)="onConfigChange()"
                class="form-input"
                placeholder="Nombre de la plataforma">
            </div>
            <div class="form-group">
              <label>Email de Soporte</label>
              <input 
                type="email" 
                [(ngModel)]="config.supportEmail" 
                (ngModelChange)="onConfigChange()"
                class="form-input"
                placeholder="email@ejemplo.com">
            </div>
            <div class="form-group full-width">
              <label>Descripci√≥n SEO</label>
              <textarea 
                [(ngModel)]="config.seoDescription" 
                (ngModelChange)="onConfigChange()"
                class="form-textarea" 
                rows="3"
                placeholder="Descripci√≥n para motores de b√∫squeda..."></textarea>
            </div>
          </div>
        </app-card>

        <!-- Feature Flags -->
        <app-card class="config-section" *ngIf="activeSection === 'general'">
          <h3>Funcionalidades (Feature Flags)</h3>
          <div class="toggles-list">
            <div class="toggle-item">
              <div class="toggle-info">
                <span class="toggle-label">Registro de Nuevos Usuarios</span>
                <span class="toggle-desc">Permitir que nuevos usuarios se registren en la plataforma</span>
              </div>
              <label class="switch">
                <input 
                  type="checkbox" 
                  [(ngModel)]="config.allowNewRegistrations"
                  (change)="onToggleChange('allowNewRegistrations', $event)">
                <span class="slider"></span>
              </label>
            </div>
            
            <div class="toggle-item">
              <div class="toggle-info">
                <span class="toggle-label">Modo Mantenimiento</span>
                <span class="toggle-desc">Activar pantalla de mantenimiento para todos los usuarios excepto admin</span>
              </div>
              <label class="switch">
                <input 
                  type="checkbox"
                  [(ngModel)]="config.maintenanceMode"
                  (change)="onToggleChange('maintenanceMode', $event)">
                <span class="slider"></span>
              </label>
            </div>

            <div class="toggle-item">
              <div class="toggle-info">
                <span class="toggle-label">Beta Features</span>
                <span class="toggle-desc">Habilitar caracter√≠sticas beta para usuarios seleccionados</span>
              </div>
              <label class="switch">
                <input 
                  type="checkbox"
                  [(ngModel)]="config.betaFeatures"
                  (change)="onToggleChange('betaFeatures', $event)">
                <span class="slider"></span>
              </label>
            </div>
          </div>
        </app-card>

        <!-- Localization -->
        <app-card class="config-section" *ngIf="activeSection === 'general'">
          <h3>Localizaci√≥n y Regi√≥n</h3>
          <div class="form-grid">
            <div class="form-group">
              <label>Idioma por Defecto</label>
              <select 
                [(ngModel)]="config.defaultLanguage" 
                (ngModelChange)="onConfigChange()"
                class="form-select">
                <option value="es">Espa√±ol</option>
                <option value="en">Ingl√©s</option>
                <option value="fr">Franc√©s</option>
                <option value="de">Alem√°n</option>
              </select>
            </div>
            <div class="form-group">
              <label>Zona Horaria</label>
              <select 
                [(ngModel)]="config.timezone" 
                (ngModelChange)="onConfigChange()"
                class="form-select">
                <option value="madrid">Europe/Madrid (GMT+1)</option>
                <option value="london">Europe/London (GMT+0)</option>
                <option value="ny">America/New_York (GMT-5)</option>
                <option value="la">America/Los_Angeles (GMT-8)</option>
                <option value="tokyo">Asia/Tokyo (GMT+9)</option>
              </select>
            </div>
            <div class="form-group">
              <label>Moneda Principal</label>
              <select 
                [(ngModel)]="config.currency" 
                (ngModelChange)="onConfigChange()"
                class="form-select">
                <option value="eur">EUR (‚Ç¨)</option>
                <option value="usd">USD ($)</option>
                <option value="gbp">GBP (¬£)</option>
                <option value="jpy">JPY (¬•)</option>
              </select>
            </div>
          </div>
        </app-card>

        <!-- Notifications Section -->
        <app-card class="config-section" *ngIf="activeSection === 'notifications'">
          <h3>üîî Configuraci√≥n de Notificaciones</h3>
          <p class="section-desc">Gestiona c√≥mo y cu√°ndo se env√≠an notificaciones a los usuarios</p>
          <div class="toggles-list">
            <div class="toggle-item">
              <div class="toggle-info">
                <span class="toggle-label">Notificaciones por Email</span>
                <span class="toggle-desc">Enviar notificaciones importantes por correo electr√≥nico</span>
              </div>
              <label class="switch">
                <input type="checkbox" checked>
                <span class="slider"></span>
              </label>
            </div>
            <div class="toggle-item">
              <div class="toggle-info">
                <span class="toggle-label">Notificaciones Push</span>
                <span class="toggle-desc">Activar notificaciones push en navegador</span>
              </div>
              <label class="switch">
                <input type="checkbox" checked>
                <span class="slider"></span>
              </label>
            </div>
            <div class="toggle-item">
              <div class="toggle-info">
                <span class="toggle-label">Resumen Diario</span>
                <span class="toggle-desc">Enviar resumen diario de actividad a usuarios</span>
              </div>
              <label class="switch">
                <input type="checkbox">
                <span class="slider"></span>
              </label>
            </div>
          </div>
        </app-card>

        <!-- Security Section -->
        <app-card class="config-section" *ngIf="activeSection === 'security'">
          <h3>üîê Configuraci√≥n de Seguridad</h3>
          <p class="section-desc">Opciones de seguridad y autenticaci√≥n</p>
          <div class="form-grid">
            <div class="form-group">
              <label>Duraci√≥n de Sesi√≥n (minutos)</label>
              <input type="number" value="60" class="form-input">
            </div>
            <div class="form-group">
              <label>Intentos de Login</label>
              <input type="number" value="5" class="form-input">
            </div>
            <div class="form-group full-width">
              <label>Pol√≠tica de Contrase√±as</label>
              <select class="form-select">
                <option value="low">Baja - M√≠nimo 6 caracteres</option>
                <option value="medium" selected>Media - 8 caracteres, may√∫sculas y n√∫meros</option>
                <option value="high">Alta - 10+ caracteres, s√≠mbolos especiales</option>
              </select>
            </div>
          </div>
          <div class="toggles-list mt-4">
            <div class="toggle-item">
              <div class="toggle-info">
                <span class="toggle-label">Autenticaci√≥n de Dos Factores (2FA)</span>
                <span class="toggle-desc">Requerir 2FA para usuarios admin</span>
              </div>
              <label class="switch">
                <input type="checkbox" checked>
                <span class="slider"></span>
              </label>
            </div>
          </div>
        </app-card>

        <!-- Payments Section -->
        <app-card class="config-section" *ngIf="activeSection === 'payments'">
          <h3>üí≥ Configuraci√≥n de Pagos</h3>
          <p class="section-desc">Gestiona los m√©todos de pago y facturaci√≥n</p>
          <div class="form-grid">
            <div class="form-group">
              <label>Procesador de Pagos</label>
              <select class="form-select">
                <option value="stripe" selected>Stripe</option>
                <option value="paypal">PayPal</option>
                <option value="square">Square</option>
              </select>
            </div>
            <div class="form-group">
              <label>Comisi√≥n de Plataforma (%)</label>
              <input type="number" value="10" class="form-input" step="0.1">
            </div>
            <div class="form-group full-width">
              <label>Stripe API Key</label>
              <input type="password" value="sk_test_‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" class="form-input">
            </div>
          </div>
          <div class="toggles-list mt-4">
            <div class="toggle-item">
              <div class="toggle-info">
                <span class="toggle-label">Facturaci√≥n Autom√°tica</span>
                <span class="toggle-desc">Generar facturas autom√°ticamente al completar pagos</span>
              </div>
              <label class="switch">
                <input type="checkbox" checked>
                <span class="slider"></span>
              </label>
            </div>
          </div>
        </app-card>

        <!-- Integrations Section -->
        <app-card class="config-section" *ngIf="activeSection === 'integrations'">
          <h3>üîå Integraciones</h3>
          <p class="section-desc">Conecta con servicios externos</p>
          <div class="integrations-grid">
            <div class="integration-card">
              <div class="integration-header">
                <img src="https://cdn.worldvectorlogo.com/logos/slack-new-logo.svg" alt="Slack" class="integration-logo">
                <div>
                  <h4>Slack</h4>
                  <span class="badge badge-success">Conectado</span>
                </div>
              </div>
              <p>Notificaciones de actividad en Slack</p>
              <button class="btn-secondary">Desconectar</button>
            </div>
            <div class="integration-card">
              <div class="integration-header">
                <img src="https://cdn.worldvectorlogo.com/logos/google-analytics-4.svg" alt="Analytics" class="integration-logo">
                <div>
                  <h4>Google Analytics</h4>
                  <span class="badge badge-warning">No conectado</span>
                </div>
              </div>
              <p>Seguimiento de analytics</p>
              <button class="btn-primary">Conectar</button>
            </div>
            <div class="integration-card">
              <div class="integration-header">
                <img src="https://cdn.worldvectorlogo.com/logos/zapier.svg" alt="Zapier" class="integration-logo">
                <div>
                  <h4>Zapier</h4>
                  <span class="badge badge-warning">No conectado</span>
                </div>
              </div>
              <p>Automatizaciones con Zapier</p>
              <button class="btn-primary">Conectar</button>
            </div>
          </div>
        </app-card>

        <!-- Email Templates Section -->
        <app-card class="config-section" *ngIf="activeSection === 'email'">
          <h3>üìß Plantillas de Email</h3>
          <p class="section-desc">Personaliza los emails que se env√≠an a los usuarios</p>
          <div class="email-templates-list">
            <div class="template-item">
              <div class="template-info">
                <h4>Email de Bienvenida</h4>
                <p>Se env√≠a cuando un nuevo usuario se registra</p>
              </div>
              <button class="btn-secondary">Editar</button>
            </div>
            <div class="template-item">
              <div class="template-info">
                <h4>Recuperaci√≥n de Contrase√±a</h4>
                <p>Email para restablecer contrase√±a olvidada</p>
              </div>
              <button class="btn-secondary">Editar</button>
            </div>
            <div class="template-item">
              <div class="template-info">
                <h4>Notificaci√≥n de Nuevo Deal</h4>
                <p>Alerta cuando se crea un nuevo proyecto</p>
              </div>
              <button class="btn-secondary">Editar</button>
            </div>
            <div class="template-item">
              <div class="template-info">
                <h4>Resumen Mensual</h4>
                <p>Resumen de actividad mensual</p>
              </div>
              <button class="btn-secondary">Editar</button>
            </div>
          </div>
        </app-card>
      </div>
    </div>
  </div>
</div>

<div class="provider-company-page" [class.no-navbar]="!showNavbar">
  <app-navbar 
    *ngIf="showNavbar"
    [userRole]="'PROVIDER'" 
    [userName]="'TechSolutions AI'"
    [notificationCount]="5"
  ></app-navbar>
  
  <div class="container">
    <!-- Page Header -->
    <div class="page-header">
      <div class="header-left">
        <div class="header-icon">
          <i class="pi pi-building"></i>
        </div>
        <div class="header-text">
          <h1>Mi Empresa</h1>
          <p class="subtitle">Gestiona el equipo y la estructura de tu organización proveedora</p>
        </div>
      </div>
      <p-button 
        label="Invitar Miembro" 
        icon="pi pi-user-plus" 
        (click)="openInviteDialog()"
        styleClass="invite-button"
      ></p-button>
    </div>

    <!-- Company Overview Card -->
    <p-card styleClass="company-overview-card">
      <div class="company-content">
        <div class="company-avatar-section">
          <div class="company-logo">
            <span>TS</span>
          </div>
        </div>

        <div class="company-info-section">
          <h2 class="company-name">{{ companyInfo.name }}</h2>
          <p class="company-industry">{{ companyInfo.industry }}</p>

          <div class="company-meta">
            <div class="meta-item">
              <i class="pi pi-map-marker"></i>
              <span>{{ companyInfo.location }}</span>
            </div>
            <div class="meta-item">
              <i class="pi pi-users"></i>
              <span>{{ companyInfo.totalMembers }} Expertos</span>
            </div>
            <div class="meta-item">
              <i class="pi pi-globe"></i>
              <span>{{ companyInfo.website }}</span>
            </div>
          </div>
        </div>

        <div class="company-actions">
          <p-button 
            label="Editar Perfil" 
            icon="pi pi-pencil" 
            styleClass="p-button-outlined"
          ></p-button>
          <p-button 
            icon="pi pi-ellipsis-v" 
            styleClass="p-button-text p-button-rounded"
            pTooltip="Más opciones"
            tooltipPosition="bottom"
          ></p-button>
        </div>
      </div>
    </p-card>

    <!-- Team Sections -->
    <div class="teams-layout">
      <!-- Technical Team -->
      <section class="team-section">
        <div class="section-header">
          <div class="header-content">
            <h3>
              <i class="pi pi-code"></i>
              Equipo Técnico
            </h3>
            <p-chip 
              [label]="getTechnicalTeam().length + ' miembros'" 
              styleClass="team-count-chip"
            ></p-chip>
          </div>
        </div>

        <div class="team-grid">
          <p-card 
            *ngFor="let member of getTechnicalTeam()" 
            styleClass="member-card"
          >
            <div class="member-content">
              <div class="member-header">
                <p-avatar 
                  [label]="member.avatar" 
                  shape="circle" 
                  size="large"
                  styleClass="member-avatar"
                ></p-avatar>
                <p-tag 
                  [value]="member.status === 'active' ? 'Activo' : member.status === 'away' ? 'Ausente' : 'Pendiente'" 
                  [severity]="getStatusSeverity(member.status)"
                  [icon]="member.status === 'active' ? 'pi pi-check-circle' : 'pi pi-clock'"
                  styleClass="status-tag"
                ></p-tag>
              </div>

              <div class="member-info">
                <h4 class="member-name">{{ member.name }}</h4>
                <p class="member-role">{{ member.role }}</p>
                <a [href]="'mailto:' + member.email" class="member-email">
                  <i class="pi pi-envelope"></i>
                  {{ member.email }}
                </a>
              </div>

              <div class="member-skills" *ngIf="member.skills">
                <p-chip 
                  *ngFor="let skill of member.skills" 
                  [label]="skill"
                  styleClass="skill-chip"
                ></p-chip>
              </div>

              <div class="member-actions">
                <p-button 
                  icon="pi pi-comment" 
                  styleClass="p-button-text p-button-sm"
                  pTooltip="Enviar mensaje"
                ></p-button>
                <p-button 
                  icon="pi pi-ellipsis-v" 
                  styleClass="p-button-text p-button-sm"
                  pTooltip="Más opciones"
                ></p-button>
              </div>
            </div>
          </p-card>

          <!-- Add Member Card -->
          <div class="add-member-card" (click)="openInviteDialog()">
            <div class="add-icon">
              <i class="pi pi-plus"></i>
            </div>
            <span class="add-text">Añadir al equipo</span>
          </div>
        </div>
      </section>

      <!-- Business Team -->
      <section class="team-section">
        <div class="section-header">
          <div class="header-content">
            <h3>
              <i class="pi pi-briefcase"></i>
              Gestión y Ventas
            </h3>
            <p-chip 
              [label]="getBusinessTeam().length + ' miembros'" 
              styleClass="team-count-chip"
            ></p-chip>
          </div>
        </div>

        <div class="team-grid">
          <p-card 
            *ngFor="let member of getBusinessTeam()" 
            styleClass="member-card"
          >
            <div class="member-content">
              <div class="member-header">
                <p-avatar 
                  [label]="member.avatar" 
                  shape="circle" 
                  size="large"
                  styleClass="member-avatar"
                ></p-avatar>
                <p-tag 
                  [value]="member.status === 'active' ? 'Activo' : member.status === 'away' ? 'Ausente' : 'Pendiente'" 
                  [severity]="getStatusSeverity(member.status)"
                  [icon]="member.status === 'active' ? 'pi pi-check-circle' : 'pi pi-clock'"
                  styleClass="status-tag"
                ></p-tag>
              </div>

              <div class="member-info">
                <h4 class="member-name">{{ member.name }}</h4>
                <p class="member-role">{{ member.role }}</p>
                <a [href]="'mailto:' + member.email" class="member-email">
                  <i class="pi pi-envelope"></i>
                  {{ member.email }}
                </a>
              </div>

              <div class="member-skills" *ngIf="member.skills">
                <p-chip 
                  *ngFor="let skill of member.skills" 
                  [label]="skill"
                  styleClass="skill-chip"
                ></p-chip>
              </div>

              <div class="member-actions">
                <p-button 
                  icon="pi pi-comment" 
                  styleClass="p-button-text p-button-sm"
                  pTooltip="Enviar mensaje"
                ></p-button>
                <p-button 
                  icon="pi pi-ellipsis-v" 
                  styleClass="p-button-text p-button-sm"
                  pTooltip="Más opciones"
                ></p-button>
              </div>
            </div>
          </p-card>

          <!-- Add Member Card -->
          <div class="add-member-card" (click)="openInviteDialog()">
            <div class="add-icon">
              <i class="pi pi-plus"></i>
            </div>
            <span class="add-text">Añadir al equipo</span>
          </div>
        </div>
      </section>
    </div>
  </div>

  <!-- Invite Member Dialog -->
  <p-dialog 
    [(visible)]="showInviteDialog" 
    header="Invitar Miembro al Equipo" 
    [modal]="true"
    [style]="{width: '500px'}"
    [draggable]="false"
    [resizable]="false"
  >
    <div class="invite-dialog-content">
      <div class="p-fluid">
        <div class="field">
          <label for="email">Email</label>
          <input 
            id="email" 
            type="email" 
            pInputText 
            placeholder="nombre@empresa.com"
          />
        </div>
        
        <div class="field">
          <label for="role">Rol</label>
          <input 
            id="role" 
            type="text" 
            pInputText 
            placeholder="ej: Senior Developer"
          />
        </div>
      </div>
    </div>
    
    <ng-template pTemplate="footer">
      <p-button 
        label="Cancelar" 
        icon="pi pi-times" 
        (click)="showInviteDialog = false" 
        styleClass="p-button-text"
      ></p-button>
      <p-button 
        label="Enviar Invitación" 
        icon="pi pi-send" 
        (click)="showInviteDialog = false"
      ></p-button>
    </ng-template>
  </p-dialog>
</div>

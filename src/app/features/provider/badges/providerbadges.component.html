<div class="badges-page">
  <app-navbar 
    *ngIf="showNavbar"
    userRole="PROVIDER"
    userName="Jorge Martín"
    [notificationCount]="5"
    [messageCount]="3"
    [projectCount]="7"
  ></app-navbar>
  
  <div class="container">
    <!-- Page Header -->
    <div class="page-header mb-4">
      <div>
        <h1 class="page-title">
          <i class="pi pi-trophy mr-2"></i>
          Badges y Recompensas
        </h1>
        <p class="page-subtitle">Tus logros y nivel de innovación en la plataforma</p>
      </div>
      <div class="level-badge">
        <span class="level-label">Nivel Actual:</span>
        <p-chip 
          [label]="currentLevel" 
          icon="pi pi-star-fill"
          [style]="{'background': 'linear-gradient(135deg, #ffd700 0%, #ffed4e 100%)', 'color': '#1a1a1a', 'font-weight': '700'}"
        ></p-chip>
      </div>
    </div>

    <!-- Progress Card -->
    <p-card styleClass="progress-card mb-4">
      <div class="progress-content">
        <div class="progress-info">
          <h3 class="next-level-title">
            <i class="pi pi-arrow-up mr-2"></i>
            Siguiente Nivel: {{ nextLevel }}
          </h3>
          <p class="progress-description">Completa 3 proyectos más para subir de nivel</p>
        </div>
        <div class="xp-display">
          <div class="xp-value">{{ currentXP }}</div>
          <div class="xp-label">Puntos XP</div>
        </div>
      </div>
      <div class="progress-bar-wrapper mt-3">
        <p-progressBar 
          [value]="progressPercentage" 
          [showValue]="false"
          [style]="{'height': '12px'}"
        ></p-progressBar>
        <div class="progress-text">
          <span>{{ progressPercentage }}% Completado</span>
          <span>{{ currentXP }} / {{ nextLevelXP }} XP</span>
        </div>
      </div>
    </p-card>

    <!-- Badges Grid -->
    <div class="badges-section">
      <h2 class="section-title mb-3">
        <i class="pi pi-star mr-2"></i>
        Tus Logros
      </h2>
      <div class="badges-grid">
        <p-card 
          *ngFor="let badge of badges" 
          [styleClass]="badge.unlocked ? 'badge-card unlocked' : 'badge-card locked'"
        >
          <div class="badge-content">
            <div class="badge-icon" [class.locked-icon]="!badge.unlocked">
              {{ badge.icon }}
            </div>
            <h3 class="badge-title" [class.locked-text]="!badge.unlocked">
              {{ badge.title }}
            </h3>
            <p class="badge-description" [class.locked-text]="!badge.unlocked">
              {{ badge.description }}
            </p>
            
            <!-- Unlocked Badge -->
            <div *ngIf="badge.unlocked" class="badge-footer">
              <p-tag 
                value="CONSEGUIDO" 
                severity="success" 
                icon="pi pi-check"
              ></p-tag>
              <span class="unlock-date">{{ badge.unlockedDate }}</span>
            </div>

            <!-- Locked Badge -->
            <div *ngIf="!badge.unlocked" class="badge-footer locked-footer">
              <div class="lock-icon-wrapper">
                <i class="pi pi-lock text-2xl"></i>
              </div>
              <div class="progress-info-small" *ngIf="badge.progress !== undefined">
                <p-progressBar 
                  [value]="badge.progress" 
                  [showValue]="false"
                  [style]="{'height': '6px', 'margin-bottom': '0.5rem'}"
                ></p-progressBar>
                <span class="requirement-text">{{ badge.requirement }}</span>
              </div>
            </div>
          </div>
        </p-card>
      </div>
    </div>
  </div>
</div>

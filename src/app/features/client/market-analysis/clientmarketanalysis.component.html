<div class="market-analysis-page" [class.no-navbar]="!showNavbar">
  <app-navbar 
    *ngIf="showNavbar"
    [userRole]="'CLIENT'" 
    [userName]="'Carlos Mart√≠nez'"
    [notificationCount]="3"
    [messageCount]="2"
    [projectCount]="4"
  ></app-navbar>
  
  <div class="container">
    <div class="page-header">
      <div>
        <h1>üìä An√°lisis de Mercado</h1>
        <p class="subtitle">Insights y tendencias del sector en tiempo real</p>
      </div>
      <div class="header-actions">
        <p-dropdown [options]="periods" [(ngModel)]="selectedPeriod" optionLabel="label" optionValue="value" styleClass="glass-dropdown"></p-dropdown>
        <p-button label="Exportar Informe" icon="pi pi-download" styleClass="p-button-outlined"></p-button>
      </div>
    </div>

    <!-- Market Overview -->
    <div class="market-grid">
      <!-- Trends Chart -->
      <p-card styleClass="chart-card main h-full">
        <ng-template pTemplate="header">
          <div class="card-header-content">
            <h3>Tendencias de Adopci√≥n de IA</h3>
          </div>
        </ng-template>
        <div class="chart-container">
          <p-chart type="line" [data]="chartData" [options]="chartOptions" height="300px"></p-chart>
        </div>
      </p-card>

      <!-- Competitor Analysis -->
      <p-card styleClass="competitors-card side h-full">
        <ng-template pTemplate="header">
          <div class="card-header-content">
            <h3>An√°lisis Competitivo</h3>
          </div>
        </ng-template>
        <div class="competitors-list">
          <div class="competitor-item">
            <div class="comp-info">
              <span class="comp-name">Competidor A</span>
              <span class="comp-share">32% Share</span>
            </div>
            <p-progressBar [value]="32" [showValue]="false" styleClass="h-2"></p-progressBar>
          </div>
          <div class="competitor-item">
            <div class="comp-info">
              <span class="comp-name">Tu Empresa</span>
              <span class="comp-share highlight">24% Share</span>
            </div>
            <p-progressBar [value]="24" [showValue]="false" styleClass="h-2 highlight-bar"></p-progressBar>
          </div>
          <div class="competitor-item">
            <div class="comp-info">
              <span class="comp-name">Competidor B</span>
              <span class="comp-share">18% Share</span>
            </div>
            <p-progressBar [value]="18" [showValue]="false" styleClass="h-2"></p-progressBar>
          </div>
        </div>
      </p-card>
    </div>

    <!-- Insights Grid -->
    <div class="insights-grid">
      <p-card styleClass="insight-card h-full">
        <div class="insight-header">
          <span class="tag trend">Tendencia</span>
          <span class="date">Hace 2 d√≠as</span>
        </div>
        <h3>Aumento en Chatbots</h3>
        <p>El uso de asistentes virtuales en retail ha crecido un 45% este trimestre.</p>
        <a href="#" class="read-more">Leer reporte completo ‚Üí</a>
      </p-card>

      <p-card styleClass="insight-card h-full">
        <div class="insight-header">
          <span class="tag alert">Alerta</span>
          <span class="date">Hoy</span>
        </div>
        <h3>Nueva Regulaci√≥n IA</h3>
        <p>La UE ha aprobado nuevas normativas sobre el uso de datos biom√©tricos.</p>
        <a href="#" class="read-more">Leer reporte completo ‚Üí</a>
      </p-card>

      <p-card styleClass="insight-card h-full">
        <div class="insight-header">
          <span class="tag opportunity">Oportunidad</span>
          <span class="date">Hace 1 semana</span>
        </div>
        <h3>Optimizaci√≥n Log√≠stica</h3>
        <p>Nuevos modelos de ML reducen costes de √∫ltima milla en un 20%.</p>
        <a href="#" class="read-more">Leer reporte completo ‚Üí</a>
      </p-card>
    </div>
  </div>
</div>



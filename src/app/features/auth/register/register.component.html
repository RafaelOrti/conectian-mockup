<div class="register-page">
  <div class="register-background"></div>
  <p-toast></p-toast>
  
  <div class="register-container">
    <div class="glass-card">
      <div class="logo-section mb-4 text-center">
        <span class="text-4xl">ü§ñ</span>
        <h2 class="text-2xl font-bold text-white mt-2">CONECTIAN</h2>
      </div>

      <p-steps [model]="items" [(activeIndex)]="activeIndex" [readonly]="true" styleClass="mb-6 custom-steps"></p-steps>

      <div class="step-content-wrapper">
        <!-- Step 0: Account Type -->
        <div *ngIf="activeIndex === 0" class="fade-in">
          <h1 class="text-3xl font-bold text-center mb-2 text-white">Selecciona tu Tipo de Cuenta</h1>
          <p class="text-gray-400 text-center mb-6">¬øC√≥mo quieres usar Conectian?</p>
          
          <div class="account-cards-grid">
            <!-- Client Card -->
            <div class="account-selection-card" (click)="selectAccountType('client')">
              <div class="card-image" style="background-image: url('https://images.unsplash.com/photo-1497366216548-37526070297c?auto=format&fit=crop&w=800&q=80')">
                <div class="overlay"></div>
                <div class="icon-wrapper">üè¢</div>
              </div>
              <div class="card-content">
                <h3>Cliente</h3>
                <p>Para empresas buscando soluciones de IA e innovaci√≥n.</p>
                <button type="button" pButton label="Seleccionar" class="p-button-outlined p-button-rounded w-full mt-4" (click)="$event.stopPropagation(); selectAccountType('client')"></button>
              </div>
            </div>

            <!-- Provider Card -->
            <div class="account-selection-card" (click)="selectAccountType('provider')">
              <div class="card-image" style="background-image: url('https://images.unsplash.com/photo-1550751827-4bd374c3f58b?auto=format&fit=crop&w=800&q=80')">
                <div class="overlay"></div>
                <div class="icon-wrapper">üß†</div>
              </div>
              <div class="card-content">
                <h3>Proveedor</h3>
                <p>Para desarrolladores y empresas de IA.</p>
                <button type="button" pButton label="Seleccionar" class="p-button-outlined p-button-rounded w-full mt-4" (click)="$event.stopPropagation(); selectAccountType('provider')"></button>
              </div>
            </div>
          </div>
        </div>

        <!-- Step 1: Basic Data -->
        <div *ngIf="activeIndex === 1" class="fade-in max-w-md mx-auto">
          <h2 class="text-2xl font-bold text-white mb-4 text-center">Datos B√°sicos</h2>
          <div class="field mb-4">
            <label class="block text-gray-300 mb-2">Correo Electr√≥nico</label>
            <span class="p-input-icon-left w-full">
              <i class="pi pi-envelope"></i>
              <input pInputText [(ngModel)]="registrationData.email" placeholder="tu@empresa.com" class="w-full" />
            </span>
          </div>
          <div class="field mb-6">
            <label class="block text-gray-300 mb-2">Contrase√±a</label>
            <p-password [(ngModel)]="registrationData.password" [toggleMask]="true" styleClass="w-full" inputStyleClass="w-full" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"></p-password>
          </div>
          <div class="flex justify-content-between align-items-center mt-6">
            <button type="button" pButton label="‚Üê Atr√°s" icon="pi pi-arrow-left" (click)="previousStep()" class="p-button-text text-gray-400 hover:text-white"></button>
            <button type="button" pButton label="Siguiente ‚Üí" icon="pi pi-arrow-right" iconPos="right" (click)="nextStep()" [disabled]="!isStep1Valid()" class="p-button-primary px-5"></button>
          </div>
        </div>

        <!-- Step 2: Company -->
        <div *ngIf="activeIndex === 2" class="fade-in max-w-md mx-auto">
          <h2 class="text-2xl font-bold text-white mb-4 text-center">Empresa</h2>
          <div class="field mb-4">
            <label class="block text-gray-300 mb-2">Dominio Web</label>
            <div class="p-inputgroup">
              <span class="p-inputgroup-addon">https://</span>
              <input pInputText [(ngModel)]="registrationData.companyDomain" placeholder="empresa.com" />
              <button type="button" pButton icon="pi pi-search" (click)="autocompleteCompany()" [loading]="loading"></button>
            </div>
          </div>

          <div *ngIf="registrationData.companyData" class="company-preview-card p-4 rounded-xl bg-white/5 border border-white/10 mb-6">
            <div class="flex align-items-center gap-4">
              <div class="text-4xl">{{ registrationData.companyData.logo }}</div>
              <div>
                <h4 class="text-xl font-bold text-white m-0">{{ registrationData.companyData.name }}</h4>
                <p class="text-gray-400 m-0 text-sm">{{ registrationData.companyData.sector }}</p>
                <p class="text-gray-500 m-0 text-xs mt-1">üìç {{ registrationData.companyData.location }}</p>
              </div>
            </div>
          </div>

          <div class="flex justify-content-between align-items-center mt-6">
            <button type="button" pButton label="‚Üê Atr√°s" icon="pi pi-arrow-left" (click)="previousStep()" class="p-button-text text-gray-400 hover:text-white"></button>
            <button type="button" pButton label="Siguiente ‚Üí" icon="pi pi-arrow-right" iconPos="right" (click)="nextStep()" [disabled]="!registrationData.companyData" class="p-button-primary px-5"></button>
          </div>
        </div>

        <!-- Step 3: Confirmation -->
        <div *ngIf="activeIndex === 3" class="fade-in max-w-md mx-auto">
          <h2 class="text-2xl font-bold text-white mb-4 text-center">Confirmaci√≥n</h2>
          <div class="bg-white/5 rounded-xl p-6 border border-white/10 mb-6">
            <div class="flex justify-content-between mb-3 border-bottom-1 surface-border pb-2">
              <span class="text-gray-400">Tipo de cuenta</span>
              <span class="text-white font-bold capitalize">{{ registrationData.accountType === 'client' ? 'Cliente' : 'Proveedor' }}</span>
            </div>
            <div class="flex justify-content-between mb-3 border-bottom-1 surface-border pb-2">
              <span class="text-gray-400">Email</span>
              <span class="text-white">{{ registrationData.email }}</span>
            </div>
            <div class="flex justify-content-between">
              <span class="text-gray-400">Empresa</span>
              <span class="text-white">{{ registrationData.companyData?.name }}</span>
            </div>
          </div>
          <div class="flex justify-content-between align-items-center mt-6">
            <button type="button" pButton label="‚Üê Atr√°s" icon="pi pi-arrow-left" (click)="previousStep()" class="p-button-text text-gray-400 hover:text-white"></button>
            <button type="button" pButton label="Continuar ‚Üí" icon="pi pi-arrow-right" iconPos="right" (click)="nextStep()" class="p-button-success px-5"></button>
          </div>
        </div>

        <!-- Step 4: Preferences -->
        <div *ngIf="activeIndex === 4" class="fade-in max-w-3xl mx-auto">
          <h2 class="text-2xl font-bold text-white mb-4 text-center">Preferencias</h2>
          <p class="text-center text-gray-400 mb-6">Selecciona tus √°reas de inter√©s</p>
          
          <div class="preferences-grid">
            <div *ngFor="let challenge of challengeOptions" 
                 class="preference-card"
                 [class.selected]="registrationData.preferences.challenges.includes(challenge)"
                 (click)="toggleChallenge(challenge)">
              <span class="text-white font-medium">{{ challenge }}</span>
              <i class="pi pi-check-circle text-primary-400" *ngIf="registrationData.preferences.challenges.includes(challenge)"></i>
            </div>
          </div>
          
          <div class="flex justify-content-between align-items-center mt-8">
            <button type="button" pButton label="‚Üê Atr√°s" icon="pi pi-arrow-left" (click)="previousStep()" class="p-button-text text-gray-400 hover:text-white"></button>
            <button type="button" pButton label="Completar Registro" icon="pi pi-check-circle" iconPos="right" (click)="onSubmit()" [loading]="loading" class="p-button-primary px-5"></button>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>

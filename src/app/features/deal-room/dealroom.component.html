<div class="deal-room-wrapper">
  <app-navbar 
    [userRole]="'CLIENT'"
    [userName]="'Carlos Mart√≠nez'"
    [notificationCount]="3"
  ></app-navbar>
  
  <div class="deal-room-container">
    <!-- Professional Header -->
    <header class="deal-header">
      <div class="header-content">
        <div class="header-main">
          <h1>{{ dealInfo.title }}</h1>
          <div class="deal-meta">
            <span class="deal-participants">{{ dealInfo.client }} ‚Üî {{ dealInfo.provider }}</span>
            <span class="deal-status" [class]="'status-' + dealInfo.status">
              {{ dealInfo.status === 'active' ? '‚óè Activo' : '‚óã Inactivo' }}
            </span>
          </div>
        </div>
        <div class="header-actions">
          <app-button variant="secondary" icon="üìä" (clickEvent)="generatePDFReport()">
            Generar Informe PDF
          </app-button>
          <app-button variant="primary" icon="‚ùì" (clickEvent)="toggleUnifiedQuestions()">
            Preguntas Unificadas
          </app-button>
        </div>
      </div>
    </header>
    
    <!-- Professional Tabs -->
    <nav class="tabs-nav">
      <button 
        *ngFor="let tab of [
          {id: 1, label: 'Chat & Comunicaci√≥n', icon: 'üí¨'},
          {id: 2, label: 'Equipos', icon: 'üë•'},
          {id: 3, label: 'Documentos', icon: 'üìÑ'},
          {id: 4, label: 'Hitos & Propuesta', icon: 'üéØ'},
          {id: 5, label: 'Legal & NDA', icon: '‚öñÔ∏è'},
          {id: 6, label: 'Rese√±as', icon: '‚≠ê'},
          {id: 7, label: 'Soporte', icon: 'üÜò'},
          {id: 8, label: 'Calculadora ROI', icon: 'üìà'}
        ]"
        class="tab"
        [class.active]="activeTab === tab.id"
        (click)="setActiveTab(tab.id)"
      >
        <span class="tab-icon">{{ tab.icon }}</span>
        <span class="tab-label">{{ tab.label }}</span>
      </button>
    </nav>
    
    <!-- Tab Content -->
    <div class="tab-content">
      <!-- Tab 1: Chat -->
      <div *ngIf="activeTab === 1" class="chat-tab">
        <div class="chat-layout">
          <div class="chat-main">
            <div class="chat-header">
              <div class="chat-status">
                <span class="status-indicator active"></span>
                <span class="text-success">Ambos activos</span>
                <span class="status-time">¬∑ √∫ltima vez hace 2 min</span>
              </div>
            </div>
            
            <div class="messages-container">
              <div *ngFor="let msg of messages" class="message" [class]="'message-' + msg.sender">
                <div class="message-avatar">
                  <span>{{ msg.senderName.charAt(0) }}</span>
                </div>
                <div class="message-body">
                  <div class="message-header">
                    <strong>{{ msg.senderName }}</strong>
                    <span class="timestamp">{{ msg.timestamp }}</span>
                  </div>
                  <div class="message-content">
                    {{ msg.content }}
                    <div *ngIf="msg.attachment" class="attachment">
                      <span class="attachment-icon">üìÑ</span>
                      <span class="attachment-name">{{ msg.attachment }}</span>
                      <button class="download-btn" (click)="downloadDocument('1')">‚¨áÔ∏è</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="message-input">
              <button class="input-btn attach-btn" title="Adjuntar archivo">üìé</button>
              <input 
                [(ngModel)]="newMessage"
                (keyup.enter)="sendMessage()"
                placeholder="Escribe un mensaje..."
                class="message-field"
              />
              <button class="input-btn emoji-btn" title="Emoji">üòä</button>
              <app-button variant="primary" (clickEvent)="sendMessage()">
                Enviar
              </app-button>
            </div>
          </div>
          
          <aside class="chat-sidebar">
            <app-card variant="elevated">
              <h3>üõ†Ô∏è Herramientas R√°pidas</h3>
              <div class="tools-list">
                <app-button variant="secondary" block="true" icon="üé•" (clickEvent)="setActiveTab(1)">
                  Agendar Videollamada
                </app-button>
                <app-button variant="secondary" block="true" icon="üìä" (clickEvent)="setActiveTab(2)">
                  Ver Equipos
                </app-button>
                <app-button variant="secondary" block="true" icon="üìà" (clickEvent)="toggleROICalculator()">
                  Calculadora ROI
                </app-button>
                <app-button variant="secondary" block="true" icon="‚ùì" (clickEvent)="toggleUnifiedQuestions()">
                  Preguntas Unificadas
                </app-button>
                <app-button variant="secondary" block="true" icon="üÜò" (clickEvent)="setActiveTab(7)">
                  Soporte
                </app-button>
              </div>
            </app-card>
          </aside>
        </div>
      </div>
      
      <!-- Tab 2: Equipos -->
      <div *ngIf="activeTab === 2" class="teams-tab">
        <div class="teams-layout">
          <div class="teams-main">
            <h2>Equipos del Proyecto</h2>
            <div class="teams-grid">
              <app-card class="team-card" variant="elevated">
                <div class="team-header">
                  <h3>{{ dealInfo.client }}</h3>
                  <span class="team-role">Cliente</span>
                </div>
                <div class="team-members">
                  <div *ngFor="let member of clientTeam" class="team-member">
                    <div class="member-avatar">
                      <span>{{ member.name.charAt(0) }}</span>
                    </div>
                    <div class="member-info">
                      <div class="member-name">{{ member.name }}</div>
                      <div class="member-role">{{ member.role }}</div>
                      <div class="member-status" [class]="'status-' + member.status">
                        <span class="status-dot"></span>
                        {{ member.status === 'active' ? 'Activo' : 'Inactivo' }}
                      </div>
                    </div>
                  </div>
                </div>
              </app-card>

              <app-card class="team-card" variant="elevated">
                <div class="team-header">
                  <h3>{{ dealInfo.provider }}</h3>
                  <span class="team-role">Proveedor</span>
                </div>
                <div class="team-members">
                  <div *ngFor="let member of providerTeam" class="team-member">
                    <div class="member-avatar">
                      <span>{{ member.name.charAt(0) }}</span>
                    </div>
                    <div class="member-info">
                      <div class="member-name">{{ member.name }}</div>
                      <div class="member-role">{{ member.role }}</div>
                      <div class="member-status" [class]="'status-' + member.status">
                        <span class="status-dot"></span>
                        {{ member.status === 'active' ? 'Activo' : 'Inactivo' }}
                      </div>
                    </div>
                  </div>
                </div>
              </app-card>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Tab 3: Documentos -->
      <div *ngIf="activeTab === 3" class="documents-tab">
        <div class="documents-header">
          <h2>Documentos Compartidos</h2>
          <app-button variant="primary" icon="üì§" (clickEvent)="uploadDocument()">
            Subir Documento
          </app-button>
        </div>
        
        <div class="documents-grid">
          <app-card *ngFor="let doc of documents" class="document-card" variant="bordered" hover="true">
            <div class="document-icon">
              <span>{{ doc.type === 'pdf' ? 'üìÑ' : doc.type === 'doc' ? 'üìù' : 'üìä' }}</span>
            </div>
            <div class="document-info">
              <h4>{{ doc.name }}</h4>
              <p class="document-meta">
                Subido por {{ doc.uploadedBy }} ¬∑ {{ doc.uploadDate }}
              </p>
              <div class="document-tags">
                <span *ngFor="let tag of doc.tags" class="document-tag">{{ tag }}</span>
              </div>
            </div>
            <div class="document-actions">
              <button class="action-btn" (click)="downloadDocument(doc.id)" title="Descargar">‚¨áÔ∏è</button>
              <button class="action-btn" (click)="viewDocument(doc.id)" title="Ver">üëÅÔ∏è</button>
            </div>
          </app-card>
        </div>
      </div>
      
      <!-- Tab 4: Hitos & Propuesta with Approvals -->
      <div *ngIf="activeTab === 4" class="milestones-tab">
        <div class="milestones-layout">
          <div class="milestones-main">
            <h2>Hitos del Proyecto</h2>
            
            <!-- Modern Timeline Chart -->
            <app-card class="timeline-chart-card" variant="elevated">
              <div class="chart-header">
                <h3>Progreso Visual</h3>
                <div class="chart-stats">
                  <span class="stat-label">Progreso Total:</span>
                  <span class="stat-value">{{ calculateTotalProgress() }}%</span>
                </div>
              </div>
              <div class="modern-timeline">
                <div class="timeline-track-bg"></div>
                <div class="timeline-progress-bar" [style.width.%]="calculateTotalProgress()"></div>
                <div class="timeline-steps">
                  <div *ngFor="let m of milestones; let i = index" 
                       class="timeline-step"
                       [class.completed]="m.status === 'completed'"
                       [class.active]="m.status === 'in-progress' || m.status === 'awaiting-approval'"
                       [class.pending]="m.status === 'pending'">
                    <div class="step-marker">
                      <span class="step-icon" *ngIf="m.status === 'completed'">‚úì</span>
                      <span class="step-number" *ngIf="m.status !== 'completed'">{{ i + 1 }}</span>
                    </div>
                    <div class="step-info">
                      <span class="step-title">{{ m.title }}</span>
                      <span class="step-date">{{ m.date }}</span>
                    </div>
                  </div>
                </div>
              </div>
            </app-card>

            <div class="timeline">
              <div *ngFor="let milestone of milestones" class="milestone-item" [class]="'milestone-' + milestone.status">
                <div class="milestone-icon">
                  <span *ngIf="milestone.status === 'completed'">‚úÖ</span>
                  <span *ngIf="milestone.status === 'in-progress'">üîÑ</span>
                  <span *ngIf="milestone.status === 'awaiting-approval'">‚è∏Ô∏è</span>
                  <span *ngIf="milestone.status === 'pending'">‚è≥</span>
                </div>
                <div class="milestone-content">
                  <div class="milestone-header">
                    <h4>{{ milestone.title }}</h4>
                    <span class="milestone-status-badge" [class]="'status-' + milestone.status">
                      {{ milestone.status === 'completed' ? 'Completado' : 
                         milestone.status === 'in-progress' ? 'En Progreso' : 
                         milestone.status === 'awaiting-approval' ? 'Esperando Aprobaci√≥n' : 'Pendiente' }}
                    </span>
                  </div>
                  <p class="milestone-date">{{ milestone.date }}</p>
                  
                  <!-- Pending Approvals -->
                  <div *ngIf="milestone.pendingApprovals && milestone.pendingApprovals.length > 0" class="approvals-section">
                    <div class="approvals-header">
                      <strong>Aprobaciones:</strong>
                      <span class="approvals-count">
                        {{ getApprovedCount(milestone) }}/{{ milestone.pendingApprovals.length }} aprobadas
                      </span>
                    </div>
                    <div class="approvals-list">
                      <div *ngFor="let approval of milestone.pendingApprovals" class="approval-item">
                        <div class="approval-person">
                          <span class="approval-avatar">{{ approval.personName.charAt(0) }}</span>
                          <div class="approval-info">
                            <div class="approval-name">{{ approval.personName }}</div>
                            <div class="approval-role">{{ approval.role }} ¬∑ {{ approval.company === 'client' ? dealInfo.client : dealInfo.provider }}</div>
                          </div>
                        </div>
                        <div class="approval-status" [class]="'status-' + approval.status">
                          <span *ngIf="approval.status === 'approved'">‚úÖ Aprobado</span>
                          <span *ngIf="approval.status === 'pending'">‚è≥ Pendiente</span>
                          <span *ngIf="approval.status === 'rejected'">‚ùå Rechazado</span>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <div *ngIf="milestone.documents" class="milestone-docs">
                    üîó {{ milestone.documents }} documentos relacionados
                  </div>
                  <div *ngIf="milestone.progress" class="progress-bar-container">
                    <div class="progress-bar" [style.width.%]="milestone.progress"></div>
                    <span class="progress-label">{{ milestone.progress }}% completo</span>
                  </div>
                </div>
              </div>
            </div>
            
            <app-card class="risks-card" variant="bordered">
              <h3>‚ö†Ô∏è Riesgos Identificados</h3>
              <p class="text-warning">Riesgo de integraci√≥n con APIs de terceros puede afectar el cronograma del prototipo. Se requiere acci√≥n.</p>
            </app-card>
          </div>
          
          <aside class="proposal-sidebar">
            <app-card variant="gradient">
              <h3>Propuesta Activa</h3>
              <h2 class="proposal-title">{{ proposal.title }}</h2>
              <div class="proposal-value">‚Ç¨{{ proposal.value.toLocaleString() }}</div>
              <div class="proposal-timeline">Timeline: {{ proposal.timeline }}</div>
              
              <div class="proposal-actions">
                <app-button variant="success" block="true" (clickEvent)="acceptProposal()">
                  ‚úÖ Aceptar Propuesta
                </app-button>
                <app-button variant="danger" block="true" (clickEvent)="rejectProposal()">
                  ‚ùå Rechazar Propuesta
                </app-button>
              </div>
              
              <a href="#" class="details-link">Ver detalles completos ‚Üí</a>
            </app-card>
          </aside>
        </div>
      </div>
      
      <!-- Tab 5: Legal & NDA -->
      <div *ngIf="activeTab === 5" class="legal-tab">
        <div class="legal-layout">
          <div class="legal-main">
            <h2>Documentos Legales</h2>
            
            <div class="legal-documents">
              <app-card *ngFor="let legalDoc of legalDocuments" class="legal-document-card" variant="elevated">
                <div class="legal-doc-header">
                  <div class="legal-doc-icon">üìã</div>
                  <div class="legal-doc-info">
                    <h3>{{ legalDoc.title }}</h3>
                    <p class="legal-doc-status" [class]="'status-' + legalDoc.status">
                      {{ legalDoc.status === 'signed' ? '‚úì Firmado' : legalDoc.status === 'pending' ? '‚è≥ Pendiente' : 'üìù Borrador' }}
                    </p>
                  </div>
                </div>
                <p class="legal-doc-description">{{ legalDoc.description }}</p>
                <div class="legal-doc-actions">
                  <app-button variant="secondary" (clickEvent)="viewLegalDocument(legalDoc.id)">
                    Ver Documento
                  </app-button>
                  <app-button 
                    *ngIf="legalDoc.status === 'pending'" 
                    variant="primary" 
                    (clickEvent)="signDocument(legalDoc.id)"
                  >
                    Firmar
                  </app-button>
                </div>
                <div class="legal-doc-meta">
                  <span>Versi√≥n {{ legalDoc.version }}</span>
                  <span>¬∑</span>
                  <span>√öltima actualizaci√≥n: {{ legalDoc.lastUpdate }}</span>
                </div>
              </app-card>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Tab 6: Rese√±as -->
      <div *ngIf="activeTab === 6" class="reviews-tab">
        <div class="reviews-layout">
          <div class="reviews-main">
            <h2>Rese√±as y Valoraciones</h2>
            
            <div class="reviews-summary">
              <app-card variant="elevated">
                <div class="summary-content">
                  <div class="summary-item">
                    <div class="summary-value">{{ averageRating }}</div>
                    <div class="summary-label">Valoraci√≥n Promedio</div>
                    <div class="summary-stars">
                      <span *ngFor="let star of getStars(averageRating)">{{ star }}</span>
                    </div>
                  </div>
                  <div class="summary-item">
                    <div class="summary-value">{{ reviews.length }}</div>
                    <div class="summary-label">Rese√±as Totales</div>
                  </div>
                </div>
              </app-card>
            </div>

            <div class="reviews-list">
              <app-card *ngFor="let review of reviews" class="review-card" variant="bordered">
                <div class="review-header">
                  <div class="reviewer-info">
                    <div class="reviewer-avatar">
                      <span>{{ review.reviewer.charAt(0) }}</span>
                    </div>
                    <div>
                      <div class="reviewer-name">{{ review.reviewer }}</div>
                      <div class="review-date">{{ review.date }}</div>
                    </div>
                  </div>
                  <div class="review-rating">
                    <span *ngFor="let star of getStars(review.rating)">{{ star }}</span>
                  </div>
                </div>
                <div class="review-content">
                  <p>{{ review.comment }}</p>
                </div>
                <div class="review-tags" *ngIf="review.tags && review.tags.length > 0">
                  <span *ngFor="let tag of review.tags" class="review-tag">{{ tag }}</span>
                </div>
              </app-card>
            </div>
          </div>
        </div>
      </div>

      <!-- Tab 7: Soporte -->
      <div *ngIf="activeTab === 7" class="support-tab">
        <div class="support-layout">
          <div class="support-main">
            <div class="support-header">
              <h2>Centro de Soporte</h2>
              <app-button variant="primary" icon="‚ûï" (clickEvent)="toggleSupportModal()">
                Crear Ticket
              </app-button>
            </div>

            <div class="support-stats">
              <app-card class="stat-card" variant="bordered">
                <div class="stat-icon">üìã</div>
                <div class="stat-value">{{ supportTickets.length }}</div>
                <div class="stat-label">Tickets Totales</div>
              </app-card>
              <app-card class="stat-card" variant="bordered">
                <div class="stat-icon">‚è≥</div>
                <div class="stat-value">{{ getOpenTicketsCount() }}</div>
                <div class="stat-label">Abiertos</div>
              </app-card>
              <app-card class="stat-card" variant="bordered">
                <div class="stat-icon">üîÑ</div>
                <div class="stat-value">{{ getInProgressTicketsCount() }}</div>
                <div class="stat-label">En Progreso</div>
              </app-card>
              <app-card class="stat-card" variant="bordered">
                <div class="stat-icon">‚úÖ</div>
                <div class="stat-value">{{ getResolvedTicketsCount() }}</div>
                <div class="stat-label">Resueltos</div>
              </app-card>
            </div>

            <div class="tickets-list">
              <h3>Tickets de Soporte</h3>
              <div *ngFor="let ticket of supportTickets" class="ticket-card">
                <app-card variant="bordered" hover="true">
                  <div class="ticket-header">
                    <div class="ticket-info">
                      <div class="ticket-id">{{ ticket.id }}</div>
                      <h4>{{ ticket.title }}</h4>
                      <div class="ticket-meta">
                        <span class="ticket-category">{{ ticket.category }}</span>
                        <span>¬∑</span>
                        <span>{{ ticket.createdAt }}</span>
                      </div>
                    </div>
                    <div class="ticket-badges">
                      <span 
                        class="priority-badge"
                        [style.background-color]="getPriorityColor(ticket.priority)"
                      >
                        {{ ticket.priority }}
                      </span>
                      <span 
                        class="status-badge"
                        [style.background-color]="getStatusColor(ticket.status)"
                      >
                        {{ ticket.status }}
                      </span>
                    </div>
                  </div>
                </app-card>
              </div>
            </div>
          </div>
        </div>
      </div>


      <!-- Tab 8: ROI Calculator -->
      <div *ngIf="activeTab === 8" class="roi-tab">
        <div class="roi-layout">
          <div class="roi-main">
            <div class="roi-header">
              <h2>Calculadora de Retorno de Inversi√≥n</h2>
              <p class="roi-subtitle">Proyecta el valor financiero y el impacto econ√≥mico de este caso de uso.</p>
            </div>
            
            <div class="roi-grid">
              <app-card class="roi-inputs-card" variant="elevated">
                <h3><span class="icon">‚öôÔ∏è</span> Par√°metros de Entrada</h3>
                <div class="roi-inputs">
                  <div class="input-group">
                    <label>Inversi√≥n Inicial (‚Ç¨)</label>
                    <input 
                      type="number" 
                      [(ngModel)]="roiCalculation.initialInvestment"
                      (ngModelChange)="calculateROI()"
                      class="roi-input"
                    />
                  </div>
                  <div class="input-group">
                    <label>Ahorros Mensuales Estimados (‚Ç¨)</label>
                    <input 
                      type="number" 
                      [(ngModel)]="roiCalculation.monthlySavings"
                      (ngModelChange)="calculateROI()"
                      class="roi-input"
                    />
                  </div>
                  <div class="input-group">
                    <label>Horizonte Temporal (meses)</label>
                    <input 
                      type="number" 
                      [(ngModel)]="roiCalculation.timeHorizon"
                      (ngModelChange)="calculateROI()"
                      class="roi-input"
                    />
                    <div class="range-slider">
                      <input type="range" min="6" max="60" [(ngModel)]="roiCalculation.timeHorizon" (ngModelChange)="calculateROI()">
                    </div>
                  </div>
                </div>
              </app-card>
              
              <app-card class="roi-results-card" variant="gradient">
                <h3><span class="icon">üìä</span> Resultados Proyectados</h3>
                <div class="roi-results-grid">
                  <div class="result-item highlight">
                    <div class="result-label">ROI Estimado</div>
                    <div class="result-value" [class.positive]="roiCalculation.roi > 0">
                      {{ roiCalculation.roi }}%
                    </div>
                    <div class="result-desc">Retorno sobre la inversi√≥n</div>
                  </div>
                  
                  <div class="result-item">
                    <div class="result-label">Ahorros Totales</div>
                    <div class="result-value">‚Ç¨{{ roiCalculation.totalSavings.toLocaleString() }}</div>
                    <div class="result-desc">En {{ roiCalculation.timeHorizon }} meses</div>
                  </div>
                  
                  <div class="result-item">
                    <div class="result-label">Payback Period</div>
                    <div class="result-value">{{ roiCalculation.paybackPeriod }} meses</div>
                    <div class="result-desc">Tiempo para recuperar inversi√≥n</div>
                  </div>
                </div>
                
                <div class="roi-chart-placeholder">
                  <!-- Placeholder for a chart -->
                  <div class="bar" style="height: 30%"></div>
                  <div class="bar" style="height: 50%"></div>
                  <div class="bar" style="height: 70%"></div>
                  <div class="bar" style="height: 90%"></div>
                  <div class="bar highlight" style="height: 100%"></div>
                </div>

                <div class="roi-actions">
                  <app-button variant="secondary" block="true" icon="üì•" (clickEvent)="generatePDFReport()">
                    Descargar Informe ROI
                  </app-button>
                </div>
              </app-card>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>



  <!-- Support Modal -->
  <div *ngIf="showSupportModal" class="modal-overlay" (click)="toggleSupportModal()">
    <app-card class="modal-content" variant="elevated" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>üÜò Crear Ticket de Soporte</h2>
        <button class="close-btn" (click)="toggleSupportModal()">‚úï</button>
      </div>
      <div class="support-form">
        <div class="form-group">
          <label>T√≠tulo del Ticket</label>
          <input type="text" [(ngModel)]="newTicket.title" class="form-input" placeholder="Describe brevemente el problema...">
        </div>
        <div class="form-group">
          <label>Categor√≠a</label>
          <select [(ngModel)]="newTicket.category" class="form-input">
            <option value="technical">T√©cnico</option>
            <option value="legal">Legal</option>
            <option value="billing">Facturaci√≥n</option>
            <option value="general">General</option>
          </select>
        </div>
        <div class="form-group">
          <label>Prioridad</label>
          <select [(ngModel)]="newTicket.priority" class="form-input">
            <option value="low">Baja</option>
            <option value="medium">Media</option>
            <option value="high">Alta</option>
            <option value="urgent">Urgente</option>
          </select>
        </div>
        <div class="form-group">
          <label>Descripci√≥n</label>
          <textarea [(ngModel)]="newTicket.description" class="form-textarea" rows="5" placeholder="Describe el problema en detalle..."></textarea>
        </div>
        <div class="form-actions">
          <app-button variant="secondary" (clickEvent)="toggleSupportModal()">Cancelar</app-button>
          <app-button variant="primary" (clickEvent)="createSupportTicket()">Crear Ticket</app-button>
        </div>
      </div>
    </app-card>
  </div>

  <!-- Unified Questions Modal -->
  <div *ngIf="showUnifiedQuestions" class="modal-overlay" (click)="toggleUnifiedQuestions()">
    <app-card class="modal-content large" variant="elevated" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>‚ùì Preguntas Unificadas</h2>
        <button class="close-btn" (click)="toggleUnifiedQuestions()">‚úï</button>
      </div>
      <div class="questions-content">
        <div class="questions-categories">
          <button 
            *ngFor="let category of ['legal', 'nda', 'documents', 'billing', 'technical']"
            class="category-btn"
          >
            {{ getCategoryIcon(category) }} {{ category }}
          </button>
        </div>
        <div class="questions-list">
          <div *ngFor="let question of unifiedQuestions" class="question-item">
            <div class="question-header">
              <span class="question-icon">{{ getCategoryIcon(question.category) }}</span>
              <h4>{{ question.question }}</h4>
            </div>
            <div class="question-answer">
              <p>{{ question.answer }}</p>
              <div *ngIf="question.relatedDocuments && question.relatedDocuments.length > 0" class="related-docs">
                <strong>Documentos relacionados:</strong>
                <ul>
                  <li *ngFor="let doc of question.relatedDocuments">{{ doc }}</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </app-card>
  </div>
</div>
